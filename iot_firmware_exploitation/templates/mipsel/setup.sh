#!/bin/bash

# combines the files in essentials/ and inflates them 
# must be run just once before qemu.sh

cd essentials

image="image.qcow2"
kernel="kernel.bin"
initrd="initrd.bin"

if [ -f "$image" ] && [ -f "$kernel" ] && [ -f "$initrd" ]; then
  echo "All three files ($image, $kernel, and $initrd) exist already. Exiting."
  exit 0
else
  echo "Inflating ($image, $kernel, and $initrd)"
  cat archive.tar.gz.part-* > archive.tar.gz
  tar xvf archive.tar.gz
  rm archive.tar.gz
fi
