# Basically a walkthrough for the DLINK we got from the IOT class
List of random notes that will need to be organized later
- Noticed an issue where the rootfs didn't contain config files needed to emulate the router properly located in /var/run.
  - Not sure if this will work yet, but my thought is that if I start the router, and run something like `tar -czvf /tmp/archive.tar.gz www/ sbin/ etc/ dev/ bin/ ...` containing nearly every directory in the root directory aside from stuff like `sys/ proc/ tmp/ media/ mnt/ boot/ ...`. 
    - After this, do the `cat archive.tar.gz | ./exfil.mipsel` like you did for rootfs, but now for this fat tar file instead
    - After untarring this, I believe that you will get an error along the lines of `tar: Exiting with failure status due to previous errors`
      - This shouldn't cause an issue. When unzipping make sure to use the -v flag to see what the last file it untarred was. If that file matches the last file that was tarred on the router, then you should be ok. If you try to include some of the directories listed above, I believe you will get errors about EOL since they contain weird files in proc/ and /mtd/ and sys/
  - I think this will be better than simply the rootfs since it will now contain files that rootfs doesn't since it will get the files that are created on the boot.
  - Might have to create a proc, mtd, sys... directory (empty for each) since I am not grabbing those from the router itself
- Portforwarding error when running qemu
  - This one can be hella annoying, but the only solutions I found were to kill the process holding that port
    - To see what the PID is holding the port run `sudo lsof -i :<PORT>`
    - Then simply kill that PID and try again 
- Now that I have the correct httpd.conf file, I try running it again. But new errors arise `./sbin/httpd: cannot start up server at fe80::3608:4ff:fe07:1afe port 80`
  - First confirm that nothing is holding that port by using `ss -lptn`
  - I ran `ip a` to see what interfaces I have, and didn't see br0, so I made it with the following commands
     ```
     ip link add name br0 type bridge
     ip link set dev br0 up
     ```
   - Yet the error persisted, so I created the IP address that it expected `ip addr add fe80::3608:4ff:fe07:1afe/64 dev br0`
   - Yet another error popped up `./sbin/httpd: cannot start up server at 192.168.0.1 port 49152`, so I ran `ip addr add 192.168.0.1/24 dev br0`
   - Confirmed everything with `ip a show br0`

- After all this, I believe that it is actually running correctly, however I can't test it since trying to connect to 192.168.0.1 from my host machine, attempts to connect to my actual router over wifi instead of the emulated one.
  - I believe the issue is that my host machine has no way to interact with the br0 interface from the emulated enviornment to even be able to try to connect to the webpage from the emulated router.
